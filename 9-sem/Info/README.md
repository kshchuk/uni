# TechMarket Database Infrastructure - ĞŸĞ¾Ğ²Ğ½Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ

## ĞĞ³Ğ»ÑĞ´ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ

TechMarket - Ñ†Ğµ Ğ¼Ñ–ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ñ–ÑĞ½Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»Ñ–Ğ½Ğ½Ñ Ñ–Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ¾Ğ¼ Ğ· Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ¼ Database-per-Service. ĞšĞ¾Ğ¶ĞµĞ½ ÑĞµÑ€Ğ²Ñ–Ñ Ğ¼Ğ°Ñ” Ğ²Ğ»Ğ°ÑĞ½Ñƒ Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ¸Ñ… Ğ´Ğ»Ñ Ğ·Ğ°Ğ±ĞµĞ·Ğ¿ĞµÑ‡ĞµĞ½Ğ½Ñ Ğ½ĞµĞ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ñ– Ñ‚Ğ° Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¾Ğ²Ğ°Ğ½Ğ¾ÑÑ‚Ñ–.

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸

#### Ğ‘Ğ°Ğ·Ğ¸ Ğ´Ğ°Ğ½Ğ¸Ñ… (OLTP + OLAP)
- **Auth DB (MySQL 8.0)** - Ğ°Ğ²Ñ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ Ñ‚Ğ° Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ²
- **Catalog DB (MySQL 8.0)** - ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ–Ğ² Ñ‚Ğ° ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ñ–Ğ¹
- **Orders DB (MySQL 8.0)** - Ğ·Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ, ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ğ¸, Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ğ¸, Ñ€ĞµĞ³Ñ–Ğ¾Ğ½Ğ¸
- **Payments DB (MySQL 8.0)** - Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºĞ° Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ñ–Ğ²
- **DWH DB (PostgreSQL 15)** - ÑÑ…Ğ¾Ğ²Ğ¸Ñ‰Ğµ Ğ´Ğ°Ğ½Ğ¸Ñ… Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ñ–Ñ‚Ğ¸ĞºĞ¸ (Star Schema)

#### ETL Pipeline
- **Extract** - Ğ²Ğ¸Ñ‚ÑĞ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ´Ğ°Ğ½Ğ¸Ñ… Ğ· 4 OLTP Ğ±Ğ°Ğ· MySQL
- **Transform** - Ğ¾Ñ‡Ğ¸Ñ‰ĞµĞ½Ğ½Ñ, Ğ²Ğ°Ğ»Ñ–Ğ´Ğ°Ñ†Ñ–Ñ Ñ‚Ğ° Ñ‚Ñ€Ğ°Ğ½ÑÑ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ Ğ´Ğ°Ğ½Ğ¸Ñ…
- **Load** - Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ² PostgreSQL DWH (6 dimension + 1 fact Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ)
- **Orchestration** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ Ñ‡ĞµÑ€ĞµĞ· Apache Airflow (Ñ‰Ğ¾Ğ´ĞµĞ½Ğ½Ñ– Ñ‚Ğ° Ñ‰Ğ¾Ñ‚Ğ¸Ğ¶Ğ½ĞµĞ²Ñ– Ğ·Ğ°Ğ¿ÑƒÑĞºĞ¸)
- **Testing** - 51 unit Ñ‚ĞµÑÑ‚ Ğ· 93% code coverage

## Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ

### Ğ†Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ±Ğ°Ğ· Ğ´Ğ°Ğ½Ğ¸Ñ…
- **[DATABASE_README.md](DATABASE_README.md)** - Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ° Ñ–Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ñ–Ñ Ğ¿Ğ¾ Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ñ– Ğ· Docker Compose
- **[KUBERNETES_README.md](KUBERNETES_README.md)** - Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ° Ñ–Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ñ–Ñ Ğ¿Ğ¾ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ Ğ² Kubernetes

### ETL Pipeline
- **[QUICKSTART.md](QUICKSTART.md)** - Ğ¨Ğ²Ğ¸Ğ´ĞºĞ¸Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ ETL Ğ·Ğ° 5 Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½
- **[ETL_SUMMARY.md](ETL_SUMMARY.md)** - ĞŸĞ¾Ğ²Ğ½Ğµ Ğ·Ğ²ĞµĞ´ĞµĞ½Ğ½Ñ ETL Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ
- **[etl/README.md](etl/README.md)** - Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ ETL Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ–Ğ²
- **[AIRFLOW_SETUP.md](AIRFLOW_SETUP.md)** - Ğ†Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ Ğ· Apache Airflow

## Ğ¨Ğ²Ğ¸Ğ´ĞºĞ¸Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### Ğ’Ğ°Ñ€Ñ–Ğ°Ğ½Ñ‚ 1: ĞŸĞ¾Ğ²Ğ½Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° (Ğ±Ğ°Ğ·Ğ¸ Ğ´Ğ°Ğ½Ğ¸Ñ… + ETL)

```bash
# 1. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğ¸ Ğ²ÑÑ– Ğ±Ğ°Ğ·Ğ¸ Ğ´Ğ°Ğ½Ğ¸Ñ…
docker-compose up -d

# 2. ĞĞºÑ‚Ğ¸Ğ²ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ²Ñ–Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğµ ÑĞµÑ€ĞµĞ´Ğ¾Ğ²Ğ¸Ñ‰Ğµ
source env/bin/activate

# 3. Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğ¸ Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ñ–
pip install -r etl/requirements.txt

# 4. Ğ—Ğ³ĞµĞ½ĞµÑ€ÑƒĞ²Ğ°Ñ‚Ğ¸ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ– Ğ´Ğ°Ğ½Ñ– Ğ² OLTP
python3 database/data/generate_test_data.py

# 5. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğ¸ ETL (Ğ¿Ğ¾Ğ²Ğ½Ğµ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ² DWH)
python etl/run_etl.py --mode full

# 6. Ğ’Ñ–Ğ´ĞºÑ€Ğ¸Ñ‚Ğ¸ Adminer Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ¸
open http://localhost:8080
```

### Ğ’Ğ°Ñ€Ñ–Ğ°Ğ½Ñ‚ 2: Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ±Ğ°Ğ·Ğ¸ Ğ´Ğ°Ğ½Ğ¸Ñ…

```bash
# 1. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğ¸ Ğ²ÑÑ– Ğ±Ğ°Ğ·Ğ¸ Ğ´Ğ°Ğ½Ğ¸Ñ…
docker-compose up -d

# 2. Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğ¸ Python Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ñ–
pip install -r database/data/requirements.txt

# 3. Ğ—Ğ³ĞµĞ½ĞµÑ€ÑƒĞ²Ğ°Ñ‚Ğ¸ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ– Ğ´Ğ°Ğ½Ñ–
python3 database/data/generate_test_data.py

# 4. Ğ’Ñ–Ğ´ĞºÑ€Ğ¸Ñ‚Ğ¸ Adminer
open http://localhost:8080
```

### Kubernetes (Ğ´Ğ»Ñ production)

```bash
# 1. Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ namespace Ñ‚Ğ° secrets
kubectl apply -f k8s/00-namespace-secrets.yaml

# 2. Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ ConfigMaps
./k8s/create-configmaps.sh

# 3. Ğ Ğ¾Ğ·Ğ³Ğ¾Ñ€Ğ½ÑƒÑ‚Ğ¸ Ğ±Ğ°Ğ·Ğ¸ Ğ´Ğ°Ğ½Ğ¸Ñ…
kubectl apply -f k8s/mysql/
kubectl apply -f k8s/postgres/

# 4. ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ğ¸Ñ‚Ğ¸ ÑÑ‚Ğ°Ñ‚ÑƒÑ
kubectl get pods -n techmarket
```

### Makefile ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸

```bash
make setup        # ĞŸĞ¾Ğ²Ğ½Ğµ Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ (Docker + Ğ´Ğ°Ğ½Ñ–)
make start        # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğ¸ Ğ±Ğ°Ğ·Ğ¸ Ğ´Ğ°Ğ½Ğ¸Ñ…
make stop         # Ğ—ÑƒĞ¿Ğ¸Ğ½Ğ¸Ñ‚Ğ¸ Ğ±Ğ°Ğ·Ğ¸ Ğ´Ğ°Ğ½Ğ¸Ñ…
make restart      # ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğ¸
make logs         # ĞŸĞµÑ€ĞµĞ³Ğ»ÑĞ½ÑƒÑ‚Ğ¸ Ğ»Ğ¾Ğ³Ğ¸
make clean        # ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚Ğ¸ Ğ²ÑĞµ
make ps           # Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ–Ğ²
make data         # Ğ—Ğ³ĞµĞ½ĞµÑ€ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ´Ğ°Ğ½Ñ–
make test         # ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ğ¸Ñ‚Ğ¸ Ğ·'Ñ”Ğ´Ğ½Ğ°Ğ½Ğ½Ñ
make backup       # Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ backup
make adminer      # Ğ’Ñ–Ğ´ĞºÑ€Ğ¸Ñ‚Ğ¸ Adminer
make k8s-deploy   # Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ² K8s
make k8s-clean    # Ğ’Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ Ğ· K8s
```

### Metabase (BI)

```bash
# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğ¸ Metabase + DWH
docker-compose up -d dwh-db metabase

# ĞŸĞ¾ÑÑ–Ğ´Ğ¸Ñ‚Ğ¸ Ğ¿Ñ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ Ğ´Ğ¾ DWH, KPI Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ Ñ– Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´
python scripts/metabase_seed.py --clear   # --clear Ğ²Ğ¸Ğ´Ğ°Ğ»ÑÑ” ÑÑ‚Ğ°Ñ€Ñ– Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ğ¸/ĞºĞ°Ñ€Ñ‚ĞºĞ¸

# Ğ’Ñ–Ğ´ĞºÑ€Ğ¸Ñ‚Ğ¸ UI
open http://localhost:3000
```

ĞÑ‡Ñ–ĞºÑƒĞ²Ğ°Ğ½Ñ– Ğ·Ğ¼Ñ–Ğ½Ğ½Ñ– Ñƒ `.env`: `METABASE_URL`, `METABASE_USER`, `METABASE_PASS` (Ğ»Ğ¾Ğ³Ñ–Ğ½/Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ Metabase) Ñ– Ñ€ĞµĞºĞ²Ñ–Ğ·Ğ¸Ñ‚Ğ¸ DWH (`DWH_HOST`, `DWH_PORT`, `DWH_NAME`, `DWH_USER`, `DWH_PASS`). 

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ

```
Info/
â”œâ”€â”€ docker-compose.yml              # Docker Compose ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ
â”œâ”€â”€ docker-compose.airflow.yml      # Airflow Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ— ETL
â”œâ”€â”€ Makefile                        # ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»Ñ–Ğ½Ğ½Ñ
â”œâ”€â”€ DATABASE_README.md              # Docker Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ
â”œâ”€â”€ KUBERNETES_README.md            # K8s Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ
â”œâ”€â”€ QUICKSTART.md                   # Ğ¨Ğ²Ğ¸Ğ´ĞºĞ¸Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ ETL
â”œâ”€â”€ ETL_SUMMARY.md                  # Ğ—Ğ²ĞµĞ´ĞµĞ½Ğ½Ñ ETL Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ
â”œâ”€â”€ AIRFLOW_SETUP.md                # ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Airflow
â”œâ”€â”€ LAB_REPORT.md                   # Ğ›Ğ°Ğ±Ğ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ½Ğ¸Ğ¹ Ğ·Ğ²Ñ–Ñ‚
â”œâ”€â”€ SCREENSHOT_INSTRUCTIONS.md      # Ğ†Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ñ–Ñ— Ğ´Ğ»Ñ ÑĞºÑ€Ñ–Ğ½ÑˆĞ¾Ñ‚Ñ–Ğ²
â”‚
â”œâ”€â”€ etl/                            # ETL Pipeline
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py                   # ĞšĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ Ğ¿Ñ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½ÑŒ
â”‚   â”œâ”€â”€ extract.py                  # Ğ•ĞºÑÑ‚Ñ€Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸ Ğ´Ğ°Ğ½Ğ¸Ñ… (4 OLTP Ğ‘Ğ”)
â”‚   â”œâ”€â”€ transform.py                # Ğ¢Ñ€Ğ°Ğ½ÑÑ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ Ñ‚Ğ° Ğ¾Ñ‡Ğ¸Ñ‰ĞµĞ½Ğ½Ñ
â”‚   â”œâ”€â”€ load.py                     # Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ² DWH
â”‚   â”œâ”€â”€ pipeline.py                 # ĞÑ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ ETL Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑƒ
â”‚   â”œâ”€â”€ run_etl.py                  # CLI Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºÑƒ ETL
â”‚   â”œâ”€â”€ examples.py                 # 5 Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡Ğ½Ğ¸Ñ… Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´Ñ–Ğ²
â”‚   â”œâ”€â”€ setup.py                    # Python package setup
â”‚   â”œâ”€â”€ README.md                   # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ–Ğ²
â”‚   â”œâ”€â”€ requirements.txt            # Python Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ñ–
â”‚   â””â”€â”€ tests/                      # 51 unit Ñ‚ĞµÑÑ‚ (93% coverage)
â”‚       â”œâ”€â”€ test_config.py
â”‚       â”œâ”€â”€ test_extract.py
â”‚       â”œâ”€â”€ test_transform.py
â”‚       â”œâ”€â”€ test_load.py
â”‚       â””â”€â”€ test_pipeline.py
â”‚
â”œâ”€â”€ airflow/                        # Apache Airflow
â”‚   â”œâ”€â”€ dags/
â”‚   â”‚   â””â”€â”€ techmarket_etl_dag.py   # 2 DAG'Ğ¸ (Ñ‰Ğ¾Ğ´ĞµĞ½Ğ½Ğ¸Ğ¹ + Ñ‰Ğ¾Ñ‚Ğ¸Ğ¶Ğ½ĞµĞ²Ğ¸Ğ¹)
â”‚   â””â”€â”€ Dockerfile                  # Custom Airflow image
â”‚
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ init/                       # SQL ÑÑ…ĞµĞ¼Ğ¸ (Ğ·Ğ³ĞµĞ½ĞµÑ€Ğ¾Ğ²Ğ°Ğ½Ñ–)
â”‚   â”‚   â”œâ”€â”€ 01_auth_schema.sql
â”‚   â”‚   â”œâ”€â”€ 02_catalog_schema.sql
â”‚   â”‚   â”œâ”€â”€ 03_orders_schema.sql
â”‚   â”‚   â”œâ”€â”€ 04_payments_schema.sql
â”‚   â”‚   â””â”€â”€ 05_dwh_schema.sql
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ generate_test_data.py   # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ…
â”‚       â””â”€â”€ requirements.txt        # Python Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ñ–
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ db/                         # DBML ÑÑ…ĞµĞ¼Ğ¸ (Ğ²Ğ¸Ñ…Ñ–Ğ´Ğ½Ñ–)
â”‚   â”‚   â”œâ”€â”€ auth_mysql.dbml
â”‚   â”‚   â”œâ”€â”€ catalog_mysql.dbml
â”‚   â”‚   â”œâ”€â”€ orders_mysql.dbml
â”‚   â”‚   â”œâ”€â”€ payments_mysql.dbml
â”‚   â”‚   â””â”€â”€ dwh_postgres.dbml
â”‚   â”œâ”€â”€ er/                         # ER Ğ´Ñ–Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¸ (PlantUML)
â”‚   â”‚   â”œâ”€â”€ auth_er.puml
â”‚   â”‚   â”œâ”€â”€ catalog_er.puml
â”‚   â”‚   â”œâ”€â”€ orders_er.puml
â”‚   â”‚   â”œâ”€â”€ payments_er.puml
â”‚   â”‚   â””â”€â”€ dwh_er.puml
â”‚   â”œâ”€â”€ images/                     # Ğ—Ğ³ĞµĞ½ĞµÑ€Ğ¾Ğ²Ğ°Ğ½Ñ– Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ´Ñ–Ğ°Ğ³Ñ€Ğ°Ğ¼
â”‚   â””â”€â”€ report-screenshots/         # Ğ”Ğ°Ğ½Ñ– Ğ´Ğ»Ñ Ğ·Ğ²Ñ–Ñ‚Ñƒ
â”‚
â”œâ”€â”€ k8s/                            # Kubernetes manifests
â”‚   â”œâ”€â”€ 00-namespace-secrets.yaml   # Namespace Ñ‚Ğ° Secrets
â”‚   â”œâ”€â”€ create-configmaps.sh        # Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ ConfigMaps
â”‚   â”œâ”€â”€ mysql/                      # MySQL StatefulSets
â”‚   â”‚   â”œâ”€â”€ 01-auth-db.yaml
â”‚   â”‚   â”œâ”€â”€ 02-catalog-db.yaml
â”‚   â”‚   â”œâ”€â”€ 03-orders-db.yaml
â”‚   â”‚   â””â”€â”€ 04-payments-db.yaml
â”‚   â””â”€â”€ postgres/                   # PostgreSQL StatefulSet
â”‚       â””â”€â”€ 05-dwh-db.yaml
â”‚
â””â”€â”€ scripts/                        # Ğ”Ğ¾Ğ¿Ğ¾Ğ¼Ñ–Ğ¶Ğ½Ñ– ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¸
    â”œâ”€â”€ setup_databases.sh          # ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğµ Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ
    â”œâ”€â”€ generate-report-data.sh     # Ğ—Ğ±Ñ–Ñ€ Ğ´Ğ°Ğ½Ğ¸Ñ… Ğ´Ğ»Ñ Ğ·Ğ²Ñ–Ñ‚Ñƒ
    â””â”€â”€ metabase_seed.py            # ĞĞ²Ñ‚Ğ¾ÑÑ–Ğ´ Metabase (Ğ¿Ñ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ DWH + KPI Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´)
```

## Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ñ—

### Ğ†Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
- **DBML** - Database Markup Language Ğ´Ğ»Ñ Ğ¾Ğ¿Ğ¸ÑÑƒ ÑÑ…ĞµĞ¼
- **MySQL 8.0** - Ğ ĞµĞ»ÑÑ†Ñ–Ğ¹Ğ½Ğ° Ğ¡Ğ£Ğ‘Ğ” Ğ´Ğ»Ñ OLTP Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ñ–Ğ¹
- **PostgreSQL 15** - Ğ ĞµĞ»ÑÑ†Ñ–Ğ¹Ğ½Ğ° Ğ¡Ğ£Ğ‘Ğ” Ğ´Ğ»Ñ OLAP Ğ°Ğ½Ğ°Ğ»Ñ–Ñ‚Ğ¸ĞºĞ¸
- **Docker & Docker Compose** - ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ
- **Kubernetes** - ĞÑ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ–Ğ²
- **Adminer** - Ğ’ĞµĞ±-Ñ–Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»Ñ–Ğ½Ğ½Ñ Ğ‘Ğ”

### ETL Pipeline ğŸ†•
- **Python 3.12** - ĞœĞ¾Ğ²Ğ° Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ´Ğ»Ñ ETL
- **SQLAlchemy 2.0** - ORM Ñ‚Ğ° database toolkit
- **pandas 2.1** - ĞĞ½Ğ°Ğ»Ñ–Ğ· Ñ‚Ğ° Ğ¼Ğ°Ğ½Ñ–Ğ¿ÑƒĞ»ÑÑ†Ñ–Ñ Ğ´Ğ°Ğ½Ğ¸Ğ¼Ğ¸
- **Apache Airflow 2.7** - ĞÑ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ Ñ‚Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ
- **pytest** - Ğ¢ĞµÑÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ (51 Ñ‚ĞµÑÑ‚, 93% coverage)
- **Faker** - Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ Ñ€ĞµĞ°Ğ»Ñ–ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¸Ñ… Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ…
- **Metabase** - BI-Ğ´ĞµÑˆĞ±Ğ¾Ñ€Ğ´Ğ¸ Ğ¿Ğ¾Ğ²ĞµÑ€Ñ… DWH

## Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğ´Ğ¾ Ğ±Ğ°Ğ· Ğ´Ğ°Ğ½Ğ¸Ñ…

### Docker Compose Ğ¿Ğ¾Ñ€Ñ‚Ğ¸

| Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ¸Ñ… | Ğ¥Ğ¾ÑÑ‚ | ĞŸĞ¾Ñ€Ñ‚ | ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡ | ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ | Database |
|-----------|------|------|------------|---------|----------|
| Auth DB | localhost | 3306 | auth_user | auth_pass | auth_db |
| Catalog DB | localhost | 3307 | catalog_user | catalog_pass | catalog_db |
| Orders DB | localhost | 3308 | orders_user | orders_pass | orders_db |
| Payments DB | localhost | 3309 | payments_user | payments_pass | payments_db |
| DWH DB | localhost | 5432 | dwh_user | dwh_pass | dwh_db |
| Adminer | localhost | 8080 | - | - | - |

### ĞŸÑ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ Ñ‡ĞµÑ€ĞµĞ· CLI

```bash
# MySQL
mysql -h localhost -P 3306 -u auth_user -pauth_pass auth_db

# PostgreSQL
psql -h localhost -p 5432 -U dwh_user -d dwh_db
# Password: dwh_pass
```

### Kubernetes (Ñ‡ĞµÑ€ĞµĞ· port-forward)

```bash
# Auth DB
kubectl port-forward -n techmarket svc/auth-db 3306:3306

# DWH DB
kubectl port-forward -n techmarket svc/dwh-db 5432:5432
```

## Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ– Ğ´Ğ°Ğ½Ñ–

Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ ÑÑ‚Ğ²Ğ¾Ñ€ÑÑ”:
- **5 Ñ€ĞµĞ³Ñ–Ğ¾Ğ½Ñ–Ğ²** - ĞšĞ¸Ñ—Ğ²ÑÑŒĞºĞ°, Ğ›ÑŒĞ²Ñ–Ğ²ÑÑŒĞºĞ°, ĞĞ´ĞµÑÑŒĞºĞ°, Ğ¥Ğ°Ñ€ĞºÑ–Ğ²ÑÑŒĞºĞ°, Ğ”Ğ½Ñ–Ğ¿Ñ€Ğ¾Ğ¿ĞµÑ‚Ñ€Ğ¾Ğ²ÑÑŒĞºĞ°
- **14 ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ñ–Ğ¹** - 6 Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ½Ğ¸Ñ… + 8 Ğ¿Ñ–Ğ´ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ñ–Ğ¹
- **25 Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ–Ğ²** - Ğ½Ğ¾ÑƒÑ‚Ğ±ÑƒĞºĞ¸, ÑĞ¼Ğ°Ñ€Ñ‚Ñ„Ğ¾Ğ½Ğ¸, Ğ¿ĞµÑ€Ğ¸Ñ„ĞµÑ€Ñ–Ñ, Ğ°ĞºÑĞµÑÑƒĞ°Ñ€Ğ¸
- **10 ÑĞ¿Ñ–Ğ²Ñ€Ğ¾Ğ±Ñ–Ñ‚Ğ½Ğ¸ĞºÑ–Ğ²** - Ğ· ÑĞºĞ¸Ñ… 5 Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ñ–Ğ²
- **50 ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ñ–Ğ²**
- **600 Ğ·Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½ÑŒ** - Ğ·Ñ– ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°Ğ¼Ğ¸ new, paid, shipped, cancelled
- **540+ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ñ–Ğ²** - card, paypal, bank_transfer, cash
- **61 ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡** - ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ğ¸ + ÑĞ¿Ñ–Ğ²Ñ€Ğ¾Ğ±Ñ–Ñ‚Ğ½Ğ¸ĞºĞ¸ + Ğ°Ğ´Ğ¼Ñ–Ğ½Ñ–ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€
- **4 Ñ€Ğ¾Ğ»Ñ–** - ADMIN, SALES, CUSTOMER, BI_VIEWER

## ĞšĞ¾Ñ€Ğ¸ÑĞ½Ñ– ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸

### ETL Pipeline

```bash
# ĞŸĞ¾Ğ²Ğ½Ğµ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ
python etl/run_etl.py --mode full

# Ğ†Ğ½ĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğµ Ğ·Ğ° 7 Ğ´Ğ½Ñ–Ğ²
python etl/run_etl.py --mode incremental --days 7

# Ğ—Ğ° ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¸Ğ¹ Ğ¿ĞµÑ€Ñ–Ğ¾Ğ´
python etl/run_etl.py --mode incremental \
  --start-date 2024-01-01 --end-date 2024-01-31

# ĞŸĞµÑ€ĞµĞ³Ğ»ÑĞ´ Ğ»Ğ¾Ğ³Ñ–Ğ²
tail -f etl.log

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ñ–Ğ²
pytest etl/tests/ -v --cov=etl

# ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´Ğ¸ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ
python etl/examples.py

# Ğ—Ğ°Ğ¿ÑƒÑĞº Airflow Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ—
docker-compose -f docker-compose.airflow.yml up -d
open http://localhost:8080
```

### Docker

```bash
# Ğ›Ğ¾Ğ³Ğ¸
docker-compose logs -f auth-db

# Ğ’Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ½Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸ Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ–
docker-compose exec auth-db mysql -u root -prootpass

# Backup
docker-compose exec auth-db mysqldump -u root -prootpass auth_db > backup.sql

# Restore
docker-compose exec -T auth-db mysql -u root -prootpass auth_db < backup.sql
```

### Kubernetes

```bash
# Ğ›Ğ¾Ğ³Ğ¸
kubectl logs -f auth-db-0 -n techmarket

# Exec Ğ² pod
kubectl exec -it auth-db-0 -n techmarket -- bash

# Backup
kubectl exec auth-db-0 -n techmarket -- \
  mysqldump -u root -prootpass auth_db > backup.sql

# Port forward Ğ²ÑÑ–Ñ… Ğ‘Ğ”
kubectl port-forward -n techmarket svc/auth-db 3306:3306 &
kubectl port-forward -n techmarket svc/catalog-db 3307:3306 &
kubectl port-forward -n techmarket svc/orders-db 3308:3306 &
kubectl port-forward -n techmarket svc/payments-db 3309:3306 &
kubectl port-forward -n techmarket svc/dwh-db 5432:5432 &
```

## Troubleshooting

### Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ¸Ñ… Ğ½Ğµ ÑÑ‚Ğ°Ñ€Ñ‚ÑƒÑ” Ğ² Docker

```bash
# ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ğ¸Ñ‚Ğ¸ Ğ»Ğ¾Ğ³Ğ¸
docker-compose logs auth-db

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğ¸
docker-compose restart auth-db

# ĞŸĞ¾Ğ²Ğ½Ğµ Ğ¿ĞµÑ€ĞµÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ
docker-compose down -v
docker-compose up -d
```

### Pod pending Ğ² Kubernetes

```bash
# ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ğ¸Ñ‚Ğ¸ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñƒ
kubectl describe pod auth-db-0 -n techmarket

# ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ğ¸Ñ‚Ğ¸ PVC
kubectl get pvc -n techmarket

# ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ğ¸Ñ‚Ğ¸ events
kubectl get events -n techmarket --sort-by='.lastTimestamp'
```

### ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ— Ğ´Ğ°Ğ½Ğ¸Ñ…

```bash
# ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ğ¸Ñ‚Ğ¸ Ğ·'Ñ”Ğ´Ğ½Ğ°Ğ½Ğ½Ñ
docker-compose exec auth-db mysqladmin ping

# ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ğ¸Ñ‚Ğ¸ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ–
docker-compose exec auth-db mysql -u auth_user -pauth_pass auth_db -e "SHOW TABLES;"
```

## ĞÑ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### ĞŸĞ¾Ğ²Ğ½Ğ° Ğ°Ñ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ· ETL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Client Layer                            â”‚
â”‚         (Adminer, CLI tools, BI Tools, Airflow UI)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ETL Orchestration                            â”‚
â”‚          Apache Airflow (Ğ©Ğ¾Ğ´ĞµĞ½Ğ½Ñ– Ñ‚Ğ° Ğ©Ğ¾Ñ‚Ğ¸Ğ¶Ğ½ĞµĞ²Ñ– DAGs)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ETL Pipeline                               â”‚
â”‚    Extract â†’ Transform â†’ Load (Python, pandas, SQLAlchemy)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                   â”‚                       â”‚
     â”‚ (Extract)         â”‚                       â”‚ (Load)
     â–¼                   â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         OLTP Databases (MySQL)          â”‚  â”‚   DWH    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚Postgres  â”‚
â”‚  â”‚Auth DB â”‚ â”‚Catalog â”‚ â”‚Orders  â”‚      â”‚  â”‚:5432     â”‚
â”‚  â”‚:3306   â”‚ â”‚:3307   â”‚ â”‚:3308   â”‚      â”‚  â”‚Star      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚Schema    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚Paymentsâ”‚                             â”‚
â”‚  â”‚:3309   â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Container Orchestration              â”‚
â”‚    (Docker Compose / Kubernetes)           â”‚
     â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Persistent Storage                 â”‚
â”‚    (Docker Volumes / K8s PVC)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞšĞ»Ğ°ÑĞ¸Ñ‡Ğ½Ğ° Ğ°Ñ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° (Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ğ‘Ğ”)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Client Layer                          â”‚
â”‚                     (Adminer, CLI tools)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Container Orchestration                    â”‚
â”‚              (Docker Compose / Kubernetes)                   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚        â”‚         â”‚         â”‚         â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”€â”€â”â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚Auth DB â”‚â”‚Catalogâ”‚â”‚Orders  â”‚â”‚Paymentsâ”‚â”‚  DWH   â”‚
â”‚MySQL   â”‚â”‚MySQL  â”‚â”‚MySQL   â”‚â”‚MySQL   â”‚â”‚Postgresâ”‚
â”‚:3306   â”‚â”‚:3307  â”‚â”‚:3308   â”‚â”‚:3309   â”‚â”‚:5432   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚        â”‚         â”‚         â”‚         â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚              Persistent Storage                  â”‚
â”‚        (Docker Volumes / K8s PVC)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Ğ’Ğ¸Ğ¼Ğ¾Ğ³Ğ¸

### ĞœÑ–Ğ½Ñ–Ğ¼Ğ°Ğ»ÑŒĞ½Ñ–

- Docker 20.10+
- Docker Compose 2.0+
- 4GB RAM
- 20GB disk space

### Ğ”Ğ»Ñ Kubernetes

- Kubernetes 1.24+
- kubectl
- 6GB RAM
- StorageClass Ğ´Ğ»Ñ dynamic provisioning

### Ğ”Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ— Ğ´Ğ°Ğ½Ğ¸Ñ…

- Python 3.9+
- pip
- 100MB+ Ğ²Ñ–Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¼Ñ–ÑÑ†Ñ Ğ´Ğ»Ñ Ğ´Ğ°Ğ½Ğ¸Ñ…

## Ğ›Ñ–Ñ†ĞµĞ½Ğ·Ñ–Ñ

Ğ¦ĞµĞ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ¾ Ğ´Ğ»Ñ Ğ½Ğ°Ğ²Ñ‡Ğ°Ğ»ÑŒĞ½Ğ¸Ñ… Ñ†Ñ–Ğ»ĞµĞ¹.

## ĞÑĞ¾Ğ±Ğ»Ğ¸Ğ²Ğ¾ÑÑ‚Ñ– Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ

### Database-per-Service
- ĞŸĞ¾Ğ²Ğ½Ğ° Ñ–Ğ·Ğ¾Ğ»ÑÑ†Ñ–Ñ Ğ´Ğ°Ğ½Ğ¸Ñ… Ğ¼Ñ–Ğ¶ ÑĞµÑ€Ğ²Ñ–ÑĞ°Ğ¼Ğ¸
- ĞĞµĞ·Ğ°Ğ»ĞµĞ¶Ğ½Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±ÑƒĞ²Ğ°Ğ½Ğ½Ñ
- Ğ Ñ–Ğ·Ğ½Ñ– Ğ¡Ğ£Ğ‘Ğ” Ğ´Ğ»Ñ Ñ€Ñ–Ğ·Ğ½Ğ¸Ñ… Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ± (MySQL Ğ´Ğ»Ñ OLTP, PostgreSQL Ğ´Ğ»Ñ OLAP)

### ETL Pipeline
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ° ĞµĞºÑÑ‚Ñ€Ğ°ĞºÑ†Ñ–Ñ Ğ· 4 OLTP Ğ±Ğ°Ğ·
- ĞÑ‡Ğ¸Ñ‰ĞµĞ½Ğ½Ñ Ñ‚Ğ° Ğ²Ğ°Ğ»Ñ–Ğ´Ğ°Ñ†Ñ–Ñ Ğ´Ğ°Ğ½Ğ¸Ñ…
- Ğ¢Ñ€Ğ°Ğ½ÑÑ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ Ğ² Star Schema
- 51 unit Ñ‚ĞµÑÑ‚ Ğ· 93% Ğ¿Ğ¾ĞºÑ€Ğ¸Ñ‚Ñ‚ÑĞ¼
- CLI Ñ–Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ + Python API
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ Ñ‡ĞµÑ€ĞµĞ· Apache Airflow

### Production-Ready
- Docker Compose Ğ´Ğ»Ñ Ñ€Ğ¾Ğ·Ñ€Ğ¾Ğ±ĞºĞ¸
- Kubernetes manifests Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½
- Healthchecks Ñ‚Ğ° auto-restart
- Persistent storage (volumes/PVC)
- Automated testing
- Comprehensive documentation

## Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ

- **5 Ğ±Ğ°Ğ· Ğ´Ğ°Ğ½Ğ¸Ñ…** (4 MySQL + 1 PostgreSQL)
- **13 Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†ÑŒ** Ğ² DWH (6 dimension + 1 fact + 6 Ğ´Ğ¶ĞµÑ€ĞµĞ»)
- **~700 Ñ€ÑĞ´ĞºÑ–Ğ² ĞºĞ¾Ğ´Ñƒ** ETL pipeline
- **51 unit Ñ‚ĞµÑÑ‚** (93% coverage)
- **1000+ Ñ€ÑĞ´ĞºÑ–Ğ²** Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ—
- **5 Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡Ğ½Ğ¸Ñ… Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´Ñ–Ğ²** Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ ETL
- **2 Airflow DAGs** (Ñ‰Ğ¾Ğ´ĞµĞ½Ğ½Ğ¸Ğ¹ + Ñ‰Ğ¾Ñ‚Ğ¸Ğ¶Ğ½ĞµĞ²Ğ¸Ğ¹)
- **4 ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºÑƒ** (CLI, Python, Docker, Airflow)
