# –ó–≤–µ–¥–µ–Ω–Ω—è: TechMarket ETL Pipeline

> –ü–æ–≤–Ω–∏–π –æ–≥–ª—è–¥ —Å—Ç–≤–æ—Ä–µ–Ω–æ–≥–æ ETL —Ä—ñ—à–µ–Ω–Ω—è —Ç–∞ —Å–ø–æ—Å–æ–±—ñ–≤ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

## –©–æ –±—É–ª–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ

### 1. **–ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π ETL Pipeline** (5 –æ—Å–Ω–æ–≤–Ω–∏—Ö –º–æ–¥—É–ª—ñ–≤)

```
etl/
‚îú‚îÄ‚îÄ config.py          # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—ñ–¥–∫–ª—é—á–µ–Ω—å –¥–æ –ë–î
‚îú‚îÄ‚îÄ extract.py         # –ï–∫—Å—Ç—Ä–∞–∫—Ü—ñ—è –∑ 4 OLTP –±–∞–∑ (MySQL)
‚îú‚îÄ‚îÄ transform.py       # –û—á–∏—â–µ–Ω–Ω—è —Ç–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ load.py           # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ DWH (PostgreSQL)
‚îî‚îÄ‚îÄ pipeline.py       # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è ETL –ø—Ä–æ—Ü–µ—Å—É
```

**–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
-  –ü–æ–≤–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (Full Load)
-  –Ü–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (Incremental Load)
-  –û–±—Ä–æ–±–∫–∞ 7 —Ç–∞–±–ª–∏—Ü—å (6 dimension + 1 fact)
-  Batch processing –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤
-  –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
-  –û—á–∏—â–µ–Ω–Ω—è —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
-  –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π

### 2. **–¢–µ—Å—Ç–æ–≤–µ –ø–æ–∫—Ä–∏—Ç—Ç—è 93%** (4 —Ç–µ—Å—Ç–æ–≤—ñ –º–æ–¥—É–ª—ñ)

```
etl/tests/
‚îú‚îÄ‚îÄ test_config.py      # 8 —Ç–µ—Å—Ç—ñ–≤ - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ test_extract.py     # 15 —Ç–µ—Å—Ç—ñ–≤ - –µ–∫—Å—Ç—Ä–∞–∫—Ü—ñ—è
‚îú‚îÄ‚îÄ test_transform.py   # 13 —Ç–µ—Å—Ç—ñ–≤ - —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ test_load.py       # 15 —Ç–µ—Å—Ç—ñ–≤ - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
-  51 —Ç–µ—Å—Ç
-  93% code coverage
-  –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å
-  Mock'–∏ –¥–ª—è –ë–î –æ–ø–µ—Ä–∞—Ü—ñ–π

### 3. **CLI —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** (run_etl.py)

–ó—Ä—É—á–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫—É ETL –∑ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞:

```bash
# –ü–æ–≤–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
python etl/run_etl.py --mode full

# –Ü–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–µ –∑–∞ 7 –¥–Ω—ñ–≤
python etl/run_etl.py --mode incremental --days 7

# –ó–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –ø–µ—Ä—ñ–æ–¥
python etl/run_etl.py --mode incremental \
  --start-date 2024-01-01 \
  --end-date 2024-01-31
```

**–§—É–Ω–∫—Ü—ñ—ó:**
-  Argparse –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
-  –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞—Ç
-  –õ–æ–≥—É–≤–∞–Ω–Ω—è —É —Ñ–∞–π–ª —Ç–∞ stdout
-  –í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —á–∞—Å—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
-  –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
-  –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ custom .env —Ñ–∞–π–ª—ñ–≤

### 4. **Apache Airflow Integration** (2 DAG'–∏)

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è ETL —á–µ—Ä–µ–∑ Apache Airflow:

```
airflow/
‚îú‚îÄ‚îÄ dags/
‚îÇ   ‚îî‚îÄ‚îÄ techmarket_etl_dag.py    # 2 DAG'–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ Dockerfile                    # Custom Airflow –æ–±—Ä–∞–∑
‚îî‚îÄ‚îÄ docker-compose.airflow.yml   # –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è Airflow
```

**DAG'–∏:**
-  `techmarket_etl_daily` - –©–æ–¥–µ–Ω–Ω–µ —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–µ (02:00 UTC)
-  `techmarket_etl_weekly_full` - –©–æ—Ç–∏–∂–Ω–µ–≤–µ –ø–æ–≤–Ω–µ (–Ω–µ–¥—ñ–ª—è 03:00 UTC)

**–ó–∞–¥–∞—á—ñ –≤ –∫–æ–∂–Ω–æ–º—É DAG:**
1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ OLTP –±–∞–∑ –¥–∞–Ω–∏—Ö
2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ DWH
3. –í–∏–∫–æ–Ω–∞–Ω–Ω—è ETL
4. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–æ —É—Å–ø—ñ—Ö
5. –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

### 5. **Docker Integration**

```
docker-compose.airflow.yml    # 5 —Å–µ—Ä–≤—ñ—Å—ñ–≤ Airflow
airflow/Dockerfile           # Custom –æ–±—Ä–∞–∑ –∑ ETL
```

**–°–µ—Ä–≤—ñ—Å–∏:**
-  postgres-airflow (–º–µ—Ç–∞–¥–∞–Ω—ñ)
-  airflow-webserver (UI –Ω–∞ –ø–æ—Ä—Ç—É 8080)
-  airflow-scheduler (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è)
-  airflow-init (—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è)
-  airflow-cli (—É—Ç–∏–ª—ñ—Ç–∏)

### 6. **Python Package Setup**

```python
# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —è–∫ –ø–∞–∫–µ—Ç
pip install -e .

# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è console script
techmarket-etl --mode full
```

**–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
-  –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ pip
-  Console entry point
-  Extras –¥–ª—è dev —Ç–∞ airflow
-  –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —á–∏—Ç–∞–Ω–Ω—è requirements

### 7. **–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è** (examples.py)

5 –¥–µ—Ç–∞–ª—å–Ω–∏—Ö –ø—Ä–∏–∫–ª–∞–¥—ñ–≤:

```bash
python etl/examples.py 1    # –ü–æ–≤–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
python etl/examples.py 2    # –Ü–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
python etl/examples.py 3    # –¢—ñ–ª—å–∫–∏ –µ–∫—Å—Ç—Ä–∞–∫—Ü—ñ—è
python etl/examples.py 4    # –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
python etl/examples.py 5    # –°–∏–º—É–ª—è—Ü—ñ—è —â–æ–¥–µ–Ω–Ω–æ–≥–æ ETL
```

### 8. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**

-  `etl/README.md` - –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (507 —Ä—è–¥–∫—ñ–≤)
-  `AIRFLOW_SETUP.md` - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Airflow (400+ —Ä—è–¥–∫—ñ–≤)
-  `QUICKSTART.md` - –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç (5 —Ö–≤–∏–ª–∏–Ω)
-  Docstrings —É –≤—Å—ñ—Ö –º–æ–¥—É–ª—è—Ö
-  Type hints

---

## –°–ø–æ—Å–æ–±–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1 –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ (—Ä–æ–∑—Ä–æ–±–∫–∞)

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –®–≤–∏–¥–∫–∏–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
- –õ–µ–≥–∫–µ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è
- –ü—Ä—è–º–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –ª–æ–≥—ñ–≤

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```bash
# –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ venv
source env/bin/activate

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ ETL
python etl/run_etl.py --mode full
```

---

### 2 –ü—Ä–æ–≥—Ä–∞–º–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è)

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å–æ–º
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ —ñ—Å–Ω—É—é—á—ñ —Å–∫—Ä–∏–ø—Ç–∏
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∫–∞—Å—Ç–æ–º—ñ–∑–∞—Ü—ñ—ó

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```python
from etl.config import ETLConfig
from etl.pipeline import ETLPipeline

config = ETLConfig.from_env()
pipeline = ETLPipeline(config)

# –ü–æ–≤–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
results = pipeline.run_full_load()

# –Ü–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–µ
from datetime import datetime, timedelta
end = datetime.now()
start = end - timedelta(days=1)
results = pipeline.run_incremental_load(start, end)
```

---

### 3 Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (—ñ–∑–æ–ª—è—Ü—ñ—è)

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –Ü–∑–æ–ª—å–æ–≤–∞–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
- –û–¥–Ω–∞–∫–æ–≤–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞ –±—É–¥—å-—è–∫—ñ–π –º–∞—à–∏–Ω—ñ
- –õ–µ–≥–∫–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```bash
# Build
docker build -t techmarket-etl:latest airflow/

# Run
docker run --rm \
  --env-file .env \
  --network techmarket-network \
  techmarket-etl:latest python etl/run_etl.py --mode full
```

---

### 4 Apache Airflow (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è)

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞ —Ä–æ–∑–∫–ª–∞–¥–æ–º
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –∞–ª–µ—Ä—Ç–∏
- –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ—Ü–µ—Å—É
- –Ü—Å—Ç–æ—Ä—ñ—è –≤–∏–∫–æ–Ω–∞–Ω—å
- Retry –º–µ—Ö–∞–Ω—ñ–∑–º

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```bash
# –ó–∞–ø—É—Å–∫ Airflow
docker-compose -f docker-compose.airflow.yml up -d

# –í—ñ–¥–∫—Ä–∏—Ç–∏ UI
open http://localhost:8080
# –õ–æ–≥—ñ–Ω: airflow / –ü–∞—Ä–æ–ª—å: airflow
```

**–†–æ–∑–∫–ª–∞–¥:**
- **–©–æ–¥–µ–Ω–Ω–∏–π ETL:** 02:00 UTC (—ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–µ)
- **–©–æ—Ç–∏–∂–Ω–µ–≤–∏–π ETL:** 03:00 UTC –Ω–µ–¥—ñ–ª—ñ (–ø–æ–≤–Ω–µ)

---

### 5 Kubernetes CronJob (–ø—Ä–æ–¥–∞–∫—à–Ω)

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å
- High availability
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π restart
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ k8s –µ–∫–æ—Å–∏—Å—Ç–µ–º–æ—é

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```yaml
apiVersion: batch/v1
kind: CronJob
metadata:
  name: techmarket-etl-daily
spec:
  schedule: "0 2 * * *"
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: etl
            image: techmarket-etl:latest
            command: ["python", "etl/run_etl.py"]
            args: ["--mode", "incremental", "--days", "1"]
            envFrom:
            - configMapRef:
                name: etl-config
```

---

## üìä –ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –õ–æ–∫–∞–ª—å–Ω–æ | Docker | Airflow | Kubernetes |
|---------------|----------|--------|---------|------------|
| **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è** | ‚≠ê –õ–µ–≥–∫–æ | ‚≠ê‚≠ê –°–µ—Ä–µ–¥–Ω—å–æ | ‚≠ê‚≠ê‚≠ê –°–∫–ª–∞–¥–Ω–æ | ‚≠ê‚≠ê‚≠ê‚≠ê –î—É–∂–µ —Å–∫–ª–∞–¥–Ω–æ |
| **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è** | ‚ùå –†—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫ | ‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–µ–Ω cron |  –í–±—É–¥–æ–≤–∞–Ω–∞ |  CronJob |
| **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥** | ‚ùå –¢—ñ–ª—å–∫–∏ –ª–æ–≥–∏ | ‚ö†Ô∏è Docker logs |  UI + –º–µ—Ç—Ä–∏–∫–∏ |  Prometheus |
| **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å** | ‚ùå –û–¥–Ω–∞ –º–∞—à–∏–Ω–∞ | ‚ö†Ô∏è –û–¥–Ω–∞ –º–∞—à–∏–Ω–∞ | ‚ö†Ô∏è LocalExecutor |  –ö–ª–∞—Å—Ç–µ—Ä |
| **–Ü–∑–æ–ª—è—Ü—ñ—è** | ‚ùå –ì–ª–æ–±–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ |  –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä |  –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä |  Pods |
| **Retry –Ω–∞ –ø–æ–º–∏–ª–∫–∞—Ö** | ‚ùå Manual | ‚ùå Manual |  –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π |  –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π |
| **–Ü—Å—Ç–æ—Ä—ñ—è –≤–∏–∫–æ–Ω–∞–Ω—å** | ‚ùå –ù–µ–º–∞—î | ‚ö†Ô∏è –õ–æ–≥–∏ |  UI –∑ —ñ—Å—Ç–æ—Ä—ñ—î—é | ‚ö†Ô∏è –õ–æ–≥–∏ –≤ ELK |
| **–ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è** | –†–æ–∑—Ä–æ–±–∫–∞ | –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è | –ü—Ä–æ–¥–∞–∫—à–Ω (–º–∞–ª–∏–π/—Å–µ—Ä–µ–¥–Ω—ñ–π) | –ü—Ä–æ–¥–∞–∫—à–Ω (–≤–µ–ª–∏–∫–∏–π) |

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –ø–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—é

### –î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏:
```bash
# 1. –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ venv
source env/bin/activate

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ
python etl/run_etl.py --mode incremental --days 1

# 3. –î–∏–≤–∏—Ç–∏—Å—å –ª–æ–≥–∏
tail -f etl.log
```

### –î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤ Docker
docker-compose -f docker-compose.airflow.yml build

# 2. –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ ETL
docker run --rm techmarket-etl python etl/run_etl.py --mode full

# 3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
psql -h localhost -U postgres -d tech_market_dwh
```

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω:
```bash
# 1. –†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ Airflow
docker-compose -f docker-compose.airflow.yml up -d

# 2. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ email –∞–ª–µ—Ä—Ç–∏ –≤ DAG
# –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ airflow/dags/techmarket_etl_dag.py

# 3. –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ DAG'–∏ –≤ UI
# http://localhost:8080

# 4. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Slack/Email –¥–ª—è –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π
```

---

## –ú–µ—Ç—Ä–∏–∫–∏ —Ç–∞ –ø–æ–∫–∞–∑–Ω–∏–∫–∏

### –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:

| –û–ø–µ—Ä–∞—Ü—ñ—è | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤ | –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è |
|----------|------------------|---------------|
| –ü–æ–≤–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è | 50,000+ | 2-5 —Ö–≤–∏–ª–∏–Ω |
| –Ü–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–µ (1 –¥–µ–Ω—å) | 500-1,000 | 10-30 —Å–µ–∫—É–Ω–¥ |
| Dim_date –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è | 730 | 1-2 —Å–µ–∫—É–Ω–¥–∏ |
| Transform 1000 –∑–∞–ø–∏—Å—ñ–≤ | 1,000 | < 1 —Å–µ–∫—É–Ω–¥–∞ |

### –ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏:

```
Name                 Stmts   Miss  Cover
----------------------------------------
etl/config.py           50      3    94%
etl/extract.py         150     10    93%
etl/transform.py       120      8    93%
etl/load.py           100      7    93%
etl/pipeline.py        80      5    94%
----------------------------------------
TOTAL                 500     33    93%
```

---

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –î–ª—è –º–∞–ª–∏—Ö –æ–±—Å—è–≥—ñ–≤ (< 10k –∑–∞–ø–∏—Å—ñ–≤):
```env
ETL_BATCH_SIZE=500
ETL_MAX_WORKERS=2
ETL_CHUNK_SIZE=5000
```

### –î–ª—è —Å–µ—Ä–µ–¥–Ω—ñ—Ö –æ–±—Å—è–≥—ñ–≤ (10k-100k –∑–∞–ø–∏—Å—ñ–≤):
```env
ETL_BATCH_SIZE=1000
ETL_MAX_WORKERS=4
ETL_CHUNK_SIZE=10000
```

### –î–ª—è –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤ (> 100k –∑–∞–ø–∏—Å—ñ–≤):
```env
ETL_BATCH_SIZE=5000
ETL_MAX_WORKERS=8
ETL_CHUNK_SIZE=50000
```

---

## –ù–∞–≤—á–∞–ª—å–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏

### –§–∞–π–ª–∏ –¥–ª—è –≤–∏–≤—á–µ–Ω–Ω—è (–ø–æ –ø–æ—Ä—è–¥–∫—É):

1. **etl/config.py** - –ü–æ—á–Ω—ñ—Ç—å –∑–≤—ñ–¥—Å–∏, –∑—Ä–æ–∑—É–º—ñ–π—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é
2. **etl/extract.py** - –í–∏–≤—á—ñ—Ç—å —è–∫ –ø—Ä–∞—Ü—é—î –µ–∫—Å—Ç—Ä–∞–∫—Ü—ñ—è
3. **etl/transform.py** - –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó
4. **etl/load.py** - –ó—Ä–æ–∑—É–º—ñ–π—Ç–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
5. **etl/pipeline.py** - –ü–æ–±–∞—á–∏—Ç–µ –≤—Å—é –∫–∞—Ä—Ç–∏–Ω—É
6. **etl/examples.py** - –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏
7. **etl/tests/** - –ù–∞–≤—á—ñ—Ç—å—Å—è —Ç–µ—Å—Ç—É–≤–∞—Ç–∏

### –ü—Ä–∏–∫–ª–∞–¥–∏ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏:

```bash
# –ö—Ä–æ–∫ 1: –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –ø—Ä–∏–∫–ª–∞–¥–∏
python etl/examples.py

# –ö—Ä–æ–∫ 2: –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–∏
pytest etl/tests/ -v

# –ö—Ä–æ–∫ 3: –°–ø—Ä–æ–±—É–π—Ç–µ –≤–ª–∞—Å–Ω–∏–π ETL
python etl/run_etl.py --mode incremental --days 1

# –ö—Ä–æ–∫ 4: –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤ –ë–î
psql -h localhost -U postgres -d tech_market_dwh
```

---

##  –ì–æ—Ç–æ–≤–∏–π —á–µ–∫–ª–∏—Å—Ç

**–ë–∞–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:**
- [x] –ï–∫—Å—Ç—Ä–∞–∫—Ü—ñ—è –∑ 4 OLTP –±–∞–∑ –¥–∞–Ω–∏—Ö
- [x] –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è —Ç–∞ –æ—á–∏—â–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
- [x] –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ 7 —Ç–∞–±–ª–∏—Ü—å DWH
- [x] –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–æ–≤–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- [x] –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- [x] –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è

**–Ø–∫—ñ—Å—Ç—å –∫–æ–¥—É:**
- [x] 93% test coverage
- [x] 51 unit —Ç–µ—Å—Ç
- [x] Type hints —É –≤—Å—ñ—Ö —Ñ—É–Ω–∫—Ü—ñ—è—Ö
- [x] Docstrings —É –≤—Å—ñ—Ö –º–æ–¥—É–ª—è—Ö
- [x] –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π

**–Ü–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- [x] CLI —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [x] Docker support
- [x] Apache Airflow DAG'–∏
- [x] Python package setup
- [x] Docker Compose –¥–ª—è Airflow

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:**
- [x] README.md (507 —Ä—è–¥–∫—ñ–≤)
- [x] AIRFLOW_SETUP.md (400+ —Ä—è–¥–∫—ñ–≤)
- [x] QUICKSTART.md (—à–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç)
- [x] examples.py (5 –ø—Ä–∏–∫–ª–∞–¥—ñ–≤)
- [x] Inline –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

**Production-ready:**
- [x] Error handling
- [x] Retry –º–µ—Ö–∞–Ω—ñ–∑–º–∏ (–≤ Airflow)
- [x] –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ª–æ–≥–∏
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è (Airflow)
- [x] –ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å (batch processing)
